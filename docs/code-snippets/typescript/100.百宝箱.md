# 百宝箱

::: tips 写在前面
这里应该是一些框架的食用心得
:::

## cheerio （爬虫）

有点难以用言语来形容这个框架，API文档写的不像人看的

* 整一个loader

注意，这个是loader,不是结点Node。（最痛苦的部分）

```ts
const cheerio = require('cheerio')
var loader = cheerio.load(HTML) // HTML是HTML文本
```

* CSS选择器

```ts
// 它返回的是一个Node,不是loader
var node =  loader(Selector);  
```

* 结点（Node）操作

```ts
node.text()         // 获取文本
node.html()         // 获取HTML
node.children()     // 获取所有子结点
node.first()        // 可用于多个node时，获取第一个结点
node.last()         // 同上，最后一个结点
node.next()         // 可获取同级别的下一个兄弟结点
node.attr('class')  // 获取某个属性的内容，该例子是获取class属性的内容

// 遍历Node集合，适用于loader之后获得了多个Node
node.each(function(){
    // 这里不能用肩头函数
    // this指向当前正在遍历的结点，必须得创建该结点的loader之后
    // 才能继续读取
    const loader = cheerio(this)
})
```

## markdown-it

一个可以将markdown字符串解析成HTML字符串，如果想使用在React项目中。

```shell
yarn add markdown-it
```

```ts
const MarkdownIt = require('markdown-it')
const md = new MarkdownIt();
const content = md.render(res.data)
```

附加`highlight.js`使其能解析代码将其高亮

```ts
import MarkdownIt from 'markdown-it';
import hljs from 'highlight.js';
const md = new MarkdownIt({
    // 如果识别到代码块，markdown-it会执行该回调函数
    // str是对应的html字符串，lang是标记在三个反引号后面的语言
    highlight: function (str: string, lang: string) {
        try {
            return '<pre class="code-block"><code>' +
                hljs.highlight(str, { language: lang }).value +
                '</code></pre>'
        } catch (__) { }
        return '';
    }
});

const MarkdownParser = {
    render: (content: string) => md.render(content)
}
export default MarkdownParser
```