(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{390:function(t,v,_){t.exports=_.p+"assets/img/2021-08-02-12-46-25.4b4d39d5.png"},445:function(t,v,_){"use strict";_.r(v);var e=_(45),s=Object(e.a)({},(function(){var t=this,v=t.$createElement,e=t._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"🥭-diff与key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#🥭-diff与key"}},[t._v("#")]),t._v(" 🥭 diff与key")]),t._v(" "),e("h2",{attrs:{id:"虚拟dom中key的作用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#虚拟dom中key的作用"}},[t._v("#")]),t._v(" 虚拟DOM中key的作用")]),t._v(" "),e("p",[t._v("简单的说，"),e("code",[t._v("key")]),t._v("是虚拟DOM对象的标识，在更新显示时"),e("code",[t._v("key")]),t._v("起着极其关键的作用。")]),t._v(" "),e("p",[t._v("详细的说，当状态中的护具发生变化时，React会根据"),e("strong",[t._v("新数据")]),t._v("生成"),e("strong",[t._v("新的虚拟DOM")]),t._v("，随后React进行"),e("strong",[t._v("新的虚拟DOM")]),t._v("与"),e("strong",[t._v("旧的虚拟DOM")]),t._v("的diff比较。比较规则如下：")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("旧虚拟DOM")]),t._v("中找到了与"),e("strong",[t._v("新虚拟DOM")]),t._v("相同的"),e("code",[t._v("key")]),t._v("：")])]),t._v(" "),e("ul",[e("li",[t._v("若虚拟DOM中内容没变，直接使用之前的真实DOM")]),t._v(" "),e("li",[t._v("若虚拟DOM中内容变了，则生成新的真实DOM，随后替换页面中之前的真实DOM")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("strong",[t._v("旧虚拟DOM中")]),t._v("未找到与"),e("strong",[t._v("新虚拟DOM")]),t._v("相同的"),e("code",[t._v("key")]),t._v("：")])]),t._v(" "),e("ul",[e("li",[t._v("根据数据创建新的真实DOM，随后渲染到页面")])]),t._v(" "),e("h2",{attrs:{id:"用-index-作为-key-可能会发生的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用-index-作为-key-可能会发生的问题"}},[t._v("#")]),t._v(" 用 "),e("code",[t._v("index")]),t._v(" 作为 "),e("code",[t._v("key")]),t._v(" 可能会发生的问题")]),t._v(" "),e("ol",[e("li",[t._v("若对数据进行逆序添加、逆序删除等"),e("strong",[t._v("破坏顺序的操作")]),t._v("，会产生没有必要的真实DOM更新。虽然界面效果没有问题，但效率低。")]),t._v(" "),e("li",[t._v("如果结构中还包含输入类的DOM，会产生错误DOM更新。界面效果会受影响。")])]),t._v(" "),e("p",[e("img",{attrs:{src:_(390),alt:""}})])])}),[],!1,null,null,null);v.default=s.exports}}]);